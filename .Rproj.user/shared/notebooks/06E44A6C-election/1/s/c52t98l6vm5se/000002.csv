"0","# Monte Carlo simulation including general bias"
"0","mu <- 0"
"0","tau <- 0.02"
"0","bias_sd <- 0.03"
"0","clinton_EV_2 <- replicate(1000, {"
"0","    results %>% mutate(sigma = sqrt(sd^2/(n) + bias_sd^2),    # added bias_sd term"
"0","                        B = sigma^2/ (sigma^2 + tau^2),"
"0","                        posterior_mean = B*mu + (1-B)*avg,"
"0","                        posterior_se = sqrt( 1 / (1/sigma^2 + 1/tau^2)),"
"0","                        simulated_result = rnorm(length(posterior_mean), posterior_mean, posterior_se),"
"0","                        clinton = ifelse(simulated_result > 0, electoral_votes, 0)) %>%    # award votes if Clinton wins state"
"0","        summarize(clinton = sum(clinton)) %>%    # total votes for Clinton"
"0","        .$clinton + 7    # 7 votes for Rhode Island and DC"
"0","})"
"0","mean(clinton_EV_2 > 269)    # over 269 votes wins election"
"1","[1]"
"1"," 0.832"
"1","
"
